# Task 1.2 Testing Instructions
## Create Supabase Project and Configure Environment Variables

### Prerequisites
- Task 1.1 completed (Supabase dependencies installed)
- Access to Supabase.com account

---

## Step 1: Create Supabase Project

1. **Go to Supabase Dashboard**
   - Visit https://supabase.com
   - Sign up or log in

2. **Create New Project**
   - Click "New Project"
   - Fill in:
     - **Name**: `thriftchain`
     - **Database Password**: Choose a strong password (save securely!)
     - **Region**: Choose closest to you
   - Click "Create new project"
   - Wait 2-3 minutes for initialization

3. **Verify Project is Ready**
   - Check for green "Project is ready" message
   - Dashboard should load without errors

---

## Step 2: Get Supabase Credentials

1. **Navigate to API Settings**
   - Click "Settings" (gear icon) in left sidebar
   - Click "API" in the settings menu

2. **Copy Project URL**
   - Find "Project URL"
   - Copy the value (looks like: `https://xxxxxxxxxxxxx.supabase.co`)
   - Save as: `NEXT_PUBLIC_SUPABASE_URL`

3. **Copy anon/public key**
   - Find "Project API keys" ‚Üí "anon" ‚Üí "public"
   - Click "Reveal" and copy the key (long string starting with `eyJ...`)
   - Save as: `NEXT_PUBLIC_SUPABASE_ANON_KEY`

4. **Copy service_role key**
   - Find "service_role" key
   - Click "Reveal" and copy (keep this SECRET!)
   - Save as: `SUPABASE_SERVICE_ROLE_KEY`

---

## Step 3: Create .env.local File

1. **Navigate to frontend directory**
   ```bash
   cd frontend
   ```

2. **Create .env.local file**
   ```bash
   # Using nano editor (or use your preferred editor)
   nano .env.local
   # Or on Windows: notepad .env.local
   ```

3. **Add environment variables**
   ```env
   # Supabase Configuration
   NEXT_PUBLIC_SUPABASE_URL=your_actual_url_here
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_actual_anon_key_here
   SUPABASE_SERVICE_ROLE_KEY=your_actual_service_role_key_here

   # Enoki (optional for now - leave commented if not set up)
   # ENOKI_API_KEY=your_enoki_api_key
   # ENOKI_OAUTH_CLIENT_ID=your_google_oauth_client_id
   # NEXT_PUBLIC_ZKLOGIN_REDIRECT_URL=http://localhost:3000/auth/callback

   # Sui Network
   NEXT_PUBLIC_SUI_NETWORK=testnet
   NEXT_PUBLIC_RPC_URL=https://fullnode.testnet.sui.io:443
   ```

4. **Save the file** (Ctrl+S, then Ctrl+X for nano)

---

## Step 4: Verify Environment Variables

1. **Run the environment test**
   ```bash
   cd frontend
   node env.test.js
   ```

2. **Expected Output (Success):**
   ```
   üîç Checking environment variables...
   
   ‚úÖ NEXT_PUBLIC_SUPABASE_URL - SET
   ‚úÖ NEXT_PUBLIC_SUPABASE_ANON_KEY - SET
   ‚úÖ SUPABASE_SERVICE_ROLE_KEY - SET
   
   üéâ All environment variables are configured correctly!
   ```

3. **If you see errors:**
   - ‚ùå NOT SET: Variable is missing from .env.local
   - ‚ö†Ô∏è PLACEHOLDER VALUE: You forgot to replace the example text

---

## Step 5: Test Supabase Connection

1. **Open Supabase Dashboard**
   - Go back to your project dashboard
   - Click "Table Editor" in left sidebar

2. **Verify Dashboard Loads**
   - Should see empty state: "Create a new table"
   - No error messages

3. **Test Database Query** (Optional)
   - Click "SQL Editor"
   - Run: `SELECT version();`
   - Should return PostgreSQL version

---

## Step 6: Verify .env.local is Git-Ignored

1. **Check git status**
   ```bash
   cd frontend
   git status
   ```

2. **Expected:**
   - `.env.local` should NOT appear in the status
   - If it does appear, that's a security issue!

3. **If .env.local is tracked (BAD):**
   ```bash
   # Remove from git tracking (but keep the file)
   git rm --cached frontend/.env.local
   git commit -m "Remove .env.local from version control"
   ```

---

## Success Criteria Checklist

- [x] Supabase project created successfully
- [x] Can access project dashboard
- [x] All 3 environment variables copied
- [x] `.env.local` file created in `frontend/` directory
- [x] `env.test.js` reports all variables as SET
- [x] Supabase dashboard loads without errors
- [x] `.env.local` is NOT tracked by git
- [x] No placeholder values (your_actual_...)

---

## Troubleshooting

### env.test.js says "NOT SET"
**Solution:**
1. Verify `.env.local` exists in `frontend/` directory
2. Check for typos in variable names
3. Make sure there are no spaces around `=`
4. Restart your terminal/editor

### env.test.js says "PLACEHOLDER VALUE"
**Solution:**
1. Edit `.env.local` file
2. Replace `your_actual_url_here` with real Supabase URL
3. Replace `your_actual_anon_key_here` with real anon key
4. Replace `your_actual_service_role_key_here` with real service role key

### Cannot access Supabase dashboard
**Solution:**
1. Check internet connection
2. Check if Supabase is down: https://status.supabase.com
3. Try logging out and back in

### .env.local appears in git status
**Solution:**
```bash
cd frontend
# Remove from tracking
git rm --cached .env.local
# Add to .gitignore if not already there
echo ".env.local" >> .gitignore
git add .gitignore
git commit -m "Add .env.local to gitignore"
```

---

## Security Notes

‚ö†Ô∏è **IMPORTANT:**
- Never commit `.env.local` to git
- Never share `SUPABASE_SERVICE_ROLE_KEY` publicly
- Rotate keys if they're ever exposed
- Use different Supabase projects for dev/staging/production

---

## Next Steps

After completing Task 1.2, proceed to **Task 1.3**: Create database schema for items, users, transactions, and offers tables
