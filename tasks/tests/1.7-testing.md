# Task 1.7 Testing Instructions
## Update frontend config with deployed contract address

### Prerequisites
- Task 1.6 completed (contracts deployed to testnet)
- Frontend project structure exists
- Sui CLI configured and working

---

## Step 1: Verify Environment File Creation

1. **Action to perform**: Check that `.env.local` file exists in frontend directory
2. **Expected output**: File exists with `NEXT_PUBLIC_THRIFTCHAIN_PACKAGE_ID` variable
3. **Verification method**: `ls -la frontend/.env.local`
4. **Success criteria**: File exists and contains the deployed package ID

---

## Step 2: Verify Environment Variable Format

1. **Action to perform**: Check the format of the package ID in `.env.local`
2. **Expected output**: Package ID starts with `0x` and is 66 characters long
3. **Verification method**: `cat frontend/.env.local | grep THRIFTCHAIN_PACKAGE_ID`
4. **Success criteria**: Package ID format is valid (0x + 64 hex characters)

---

## Step 3: Verify Frontend Integration

1. **Action to perform**: Check that `frontend/src/lib/sui/queries.ts` uses environment variable
2. **Expected output**: Code reads from `process.env.NEXT_PUBLIC_THRIFTCHAIN_PACKAGE_ID`
3. **Verification method**: `grep -n "process.env.NEXT_PUBLIC_THRIFTCHAIN_PACKAGE_ID" frontend/src/lib/sui/queries.ts`
4. **Success criteria**: Environment variable is properly referenced in code

---

## Step 4: Test Environment Variable Loading

1. **Action to perform**: Create a simple test script to verify environment loading
2. **Expected output**: Script can read and parse the environment variable
3. **Verification method**: Run test script and verify output
4. **Success criteria**: Environment variable loads correctly with proper value

---

## Step 5: Test Struct Types Generation

1. **Action to perform**: Verify that STRUCT_TYPES are generated correctly
2. **Expected output**: Struct types include the package ID and module path
3. **Verification method**: Check that struct types follow pattern `{PACKAGE_ID}::marketplace::{Type}`
4. **Success criteria**: All struct types are properly formatted with package ID

---

## Success Criteria Checklist

- [ ] `.env.local` file exists in frontend directory
- [ ] `NEXT_PUBLIC_THRIFTCHAIN_PACKAGE_ID` is set to valid package ID
- [ ] Package ID format is correct (0x + 64 hex characters)
- [ ] `queries.ts` uses environment variable correctly
- [ ] Environment variable can be loaded by Node.js
- [ ] STRUCT_TYPES are generated with correct package ID
- [ ] No TypeScript compilation errors
- [ ] Frontend can import `THRIFTCHAIN_PACKAGE_ID` without errors

---

## Troubleshooting

### Common Error: Environment file not found
**Solution:** Ensure `.env.local` is created in the correct directory (`frontend/`)

### Common Error: Invalid package ID format
**Solution:** Verify the package ID from deployment output starts with `0x` and is 66 characters total

### Common Error: Environment variable not loading
**Solution:** Check that the variable name matches exactly: `NEXT_PUBLIC_THRIFTCHAIN_PACKAGE_ID`

### Common Error: Struct types not generated correctly
**Solution:** Verify that the package ID is properly concatenated with module paths

---

## Next Steps

After completing Task 1.7, proceed to **Task 1.8**: Test contract functions end-to-end on testnet
